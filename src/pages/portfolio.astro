---
// src/pages/portfolio.astro
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/blocks/Hero.astro';
import CTA from '../components/blocks/CTA.astro';

const pageTitle = 'Наші роботи - Портфоліо UWS';
const pageDescription = 'Портфоліо виконаних робіт компанії UWS: встановлення вікон, балкони, ремонт вікон. Фотографії та опис проектів.';

const projects = [
  {
    title: 'Заміна вікон у квартирі на Оболоні',
    category: 'Встановлення вікон',
    location: 'Київ, Оболонський район',
    description: 'Встановлення 5 вікон REHAU Excellent 70мм з двухкамерними склопакетами.',
    image: '/images/projects/projects-1.jpg',
    year: '2025',
    features: ['REHAU 70мм', 'Двухкамерний склопакет', 'Монтаж за 1 день']
  },
  {
    title: 'Остеклення балкона під ключ',
    category: 'Балкони',
    location: 'Київ, Голосіївський район',
    description: 'Тепле остеклення ПВХ з внутрішньою обробкою та утепленням.',
    image: '/images/projects/projects-2.jpg',
    year: '2025',
    features: ['ПВХ профіль', 'Утеплення', 'Обробка ПВХ']
  },
  {
    title: 'Ремонт вікон у офісному приміщенні',
    category: 'Ремонт вікон',
    location: 'Київ, Подільський район',
    description: 'Регулювання фурнітури, заміна ущільнювачів на 12 вікнах.',
    image: '/images/projects/projects-3.jpg',
    year: '2025',
    features: ['Регулювання', 'Заміна ущільнювачів', '12 вікон']
  },
  {
    title: 'Встановлення вхідних дверей',
    category: 'Вхідні двері',
    location: 'Київ, Дарницький район',
    description: 'Монтаж металевих вхідних дверей з підвищеною звукоізоляцією.',
    image: '/images/projects/projects-4.jpg',
    year: '2025',
    features: ['Металеві двері', 'Звукоізоляція', 'Двері під ключ']
  },
  {
    title: 'Балконний блок з дверима',
    category: 'Встановлення вікон',
    location: 'Київ, Святошинський район',
    description: 'Заміна старого балконного блоку на новий з ПВХ профілю.',
    image: '/images/projects/projects-5.jpg',
    year: '2025',
    features: ['Балконний блок', 'ПВХ профіль', 'Підвіконня']
  },
  {
    title: 'Москітні сітки на вікна',
    category: 'Аксесуари',
    location: 'Київ, Печерський район',
    description: 'Виготовлення та встановлення рамкових москітних сіток на 8 вікон.',
    image: '/images/projects/projects-6.jpg',
    year: '2025',
    features: ['Рамочні сітки', 'Алюмінієвий профіль', '8 сіток']
  }
];

const categories = ['Всі роботи', 'Встановлення вікон', 'Балкони', 'Ремонт вікон', 'Вхідні двері', 'Аксесуари'];
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <Hero
    title="Наші роботи"
    subtitle="Реалізовані проекти з встановлення та ремонту вікон у Києві";
  />

  <!-- Portfolio Grid -->
  <section class="section">
    <div class="container">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-heading font-bold mb-4">Реалізовані проекти</h2>
        <p class="text-gray-600 max-w-2xl mx-auto dark:text-gray-400">
          Подивіться наші завершені проекти та переконайтеся в якості нашої роботи
        </p>
      </div>

      <!-- Category Filter -->
      <div class="flex flex-wrap justify-center gap-2 mb-8">
        {categories.map((category, index) => (
          <button
            class={`px-4 py-2 rounded-lg font-medium transition-colors ${
              index === 0 
                ? 'bg-brand-yellow text-brand-dark' 
                : 'bg-gray-100 text-gray-600 hover:bg-brand-yellow hover:text-brand-dark dark:bg-gray-700 dark:text-gray-300'
            }`}
            data-category={category}
          >
            {category}
          </button>
        ))}
      </div>

      <!-- Projects Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="projects-grid">
        {projects.map((project) => (
          <div 
            class="bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all group dark:bg-gray-800"
            data-category={project.category}
          >
            <div class="h-56 bg-gradient-to-br from-brand-gray to-brand-dark relative overflow-hidden">
              {project.image ? (
                <img 
                  src={project.image} 
                  alt={project.title}
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                />
              ) : (
                <svg class="w-20 h-20 text-brand-yellow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
              )}
              <div class="absolute top-4 right-4">
                <span class="inline-block px-3 py-1 text-xs font-medium bg-brand-yellow text-brand-dark rounded-full">
                  {project.year}
                </span>
              </div>
            </div>
            <div class="p-6">
              <span class="inline-block px-3 py-1 text-xs font-medium bg-brand-yellow/20 text-brand-yellow rounded-full mb-3">
                {project.category}
              </span>
              <h3 class="text-xl font-heading font-bold mb-2 dark:text-white">
                {project.title}
              </h3>
              <p class="text-gray-600 text-sm mb-3 dark:text-gray-400">{project.description}</p>
              <div class="flex items-center gap-2 text-sm text-gray-500 mb-4">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>{project.location}</span>
              </div>
              <div class="flex flex-wrap gap-2">
                {project.features.map((feature) => (
                  <span class="px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded dark:bg-gray-700 dark:text-gray-300">
                    {feature}
                  </span>
                ))}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Statistics -->
  <section class="section bg-brand-dark text-white">
    <div class="container">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
        <div class="text-center">
          <p class="text-4xl md:text-5xl font-heading font-bold text-brand-yellow mb-2">500+</p>
          <p class="text-gray-300">Виконаних проектів</p>
        </div>
        <div class="text-center">
          <p class="text-4xl md:text-5xl font-heading font-bold text-brand-yellow mb-2">12 000+</p>
          <p class="text-gray-300">Встановлених вікон</p>
        </div>
        <div class="text-center">
          <p class="text-4xl md:text-5xl font-heading font-bold text-brand-yellow mb-2">15</p>
          <p class="text-gray-300">Років на ринку</p>
        </div>
        <div class="text-center">
          <p class="text-4xl md:text-5xl font-heading font-bold text-brand-yellow mb-2">98%</p>
          <p class="text-gray-300">Клієнтів рекомендують</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <CTA
    title="Хочете такий же результат?"
    subtitle="Замовте безкоштовний замір та отримайте професійну консультацію"
    ctaText="Замовити замір"
    ctaLink="/contacts"
    showForm={true}
  />
</BaseLayout>

<script>
  // Simple category filter
  const filterButtons = document.querySelectorAll('[data-category]');
  const projects = document.querySelectorAll('[id="projects-grid"] > div');

  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      const category = button.getAttribute('data-category');
      
      // Update active button
      filterButtons.forEach(btn => {
        btn.classList.remove('bg-brand-yellow', 'text-brand-dark');
        btn.classList.add('bg-gray-100', 'text-gray-600', 'dark:bg-gray-700', 'dark:text-gray-300');
      });
      button.classList.remove('bg-gray-100', 'text-gray-600', 'dark:bg-gray-700', 'dark:text-gray-300');
      button.classList.add('bg-brand-yellow', 'text-brand-dark');

      // Filter projects
      projects.forEach(project => {
        const projectCategory = project.getAttribute('data-category');
        if (category === 'Всі роботи' || projectCategory === category) {
          (project as HTMLElement).style.display = 'block';
        } else {
          (project as HTMLElement).style.display = 'none';
        }
      });
    });
  });
</script>
